高频疑难题
==============================================

PS：大部分答案个人已查阅文档找到出处并订正，有误的部分应该很少，不对之处望大家指正。


1.以下哪些设计违反了CSEC Golden Rules （）
A.考虑易用性，设备管理面提供记住密码功能
B.应该采用标准的密钥派生函数如PBKDF2
C.为保证设备开局免软调，必须做到与现网设备兼容，因此协议缺省关闭认证以及加密功能
D.记录所有的配置命令执行日志再远程系统日志服务器上
参考答案：AC。D项描述是CSEC推荐做法，所以D没有违反规则。

搞清必选审视项 adcp/cdcp/pdcp
一句话总结：ADCP仅测试闭环和开发落地，CDCP不选需求，PDCP不选威胁分析。
3.85    如下哪些是ADCP必选审视项？
A 产品在上市阶段在可信要求上是否做到该行业标杆
B测试报告中与可信产品定义相关的测试闭环验收结果
C 可信要求规划的开发落地质量（缺陷率和遗留缺陷等）
D与可信相关的目标和资源投入
选BC
3.87    如下哪些是Charter/CDCP必选审视项？
A 产品在上市阶段在可信要求上是否做到该行业标杆
B 业务场景/威胁分析的要求，韧性要求，认证及等级要求
C 可信产品定义的需求，代码重构和技术债务的需求和工作量
D 可信带来的代码重构和技术债务
选ABD
3.88    如下哪些是PDCP必选审视项？
A 可信产品定义的需求，代码重构和技术债务的需求和工作量
B 业务场景/威胁分析的要求，韧性要求，认证及等级要求
C 产品在上市阶段在可信要求上是否做到该行业标杆
D 与可信相关的目标和资源投入
选ACD，威胁分析是CDCP
知识点：C是概念，P是计划，A是可获得性。
CDCP：concept decision check point (CDCP)概念决策评审点
PDCD:plan decision check point (PDCP)计划决策评审点
availability decision checkpoint (ADCP)可获得性决策评审点
CDCP（concept decision check point，概念决策评审点）评审：产品包、市场、业务潜力、开发计划等
PDCP（plan decision check point，计划决策评审点）评审：业务潜力、市场理解、承诺、开发计划等
EDCP（ESS decision check point，早期销售决策评审点）评审：业务展望、产品质量、交付准备度、风险等
ADCP（availability decision check point，可获得性决策评审点）评审：发货质量、交付准备度、业务展望、发布与宣传、风险等

tr1阶段输出的没有，分解分配表
6（多选）如下安全相关的文档，需要在 TR1 阶段输出的有：
A 需求敏感特性自检
B 安全性威胁分析及需求说明书
C 红线解决方案落地自检表
D 安全需求分解分配表
选AB。需求特性自检和需求说明。已确认没有D。
  

断言检查细节，没有测试替身替代 
 过度使用断言检查每个细节，致使整个测试变得脆弱，考虑什么手段进行重构？ 
A、用测试替身替代外部依赖，根据需要将其封装到适配层中
B、将非强相关的用例进行拆分
C、识别无关细节，并将其从测试中移除
D、使用 bool 运算符替换位运算符
参考答案：选BC。已确认A跟脆弱的测试有关，D肯定跟断言没啥关系。
  


使用UML对系统进行动态建模，不能使用类图。
要对一个企业的工作流程进行建模，活动图最重要。

以下哪些行为可以不视为Hack Back（）
A.  gi作为被攻击方，在自身网络内部进行的防御行为；
B.  经批准或客户授权，g在自运营网络中或客户网络中进行的渗透测试或其他安全测试活动。

以下关于软件建模的三种模型描述正确的有：全选。
搬移没有重新组织函数。消除if/else，全选。
ABCE，测试框架的考虑与发布时间无关

对下面代码段，请忽略不同语言的规范和语法差异，哪个重构方法最好？（） 



顺序时序图，曹操：虚线是组件的生命线
8：曹操刘备顺序图问题：图中的虚线称作“生命线”，表示一个对象在其时间周期内的存在
分析下面时序图/顺序图，并指出哪种说法是正确的？（C） 
参考答案：C。真题，重点理解，可能会改成旅客预订旅游地，让选出整个时序图流程各步骤。
在时序图中，对象生命线（Object Lifeline）表示扮演一个特定角色的实例。
“求战”，“怎么办”以及”火烧连营”这3条消息是有严格次序的；“:曹操”，“:刘备”，“:孔明”代表3个对象，并不是3个类；求战”这条消息应该是将调用“刘备”的某一操作。



【7.13更新】54. 有这样一段代码，希望能够提升方法的可扩展性和可读性，在不考虑组件依赖关系和耦合度的情况下，请选择最适合的优化办法（其中 User 和 Passport 是已有类，User 包含userId 和 userName，Passport 包含 passportId 和 passportExpirationDate，代码中省略了实现细节），请忽略不同语言的规范和语法差异。（ ）
```public class PassportChecker {
public CheckResult checkUserAndPassport(UUIDuserId, String userName, UUID
passportId, Instant passportExpirationDate)
{ /* (省略实现) */ }
} 
```
D. 引 入 参 数 对 象 （ Introduce Parameter Object ）： 
``` public class
PassportCheckerParam {private UUID userId; private String userName; private UUID
passportId; private Instant passportExpirationDate; /* (省略 Getter 和 Setter) */ } 
```
```  public  class  PassportChecker  {public  CheckResult
checkUserAndPassport(PassportCheckerParam paramObj)) { /* (省略实现) */ } }
 ```
. 引入参数对象（Introduce Parameter Object）和保持对象完整性（Preserve
WholeObject）：
 ``` public class PassportCheckerParam { private User user; private
Passportpassport; /* (省略 Getter 和 Setter) */ } `````` public class PassportChecker
{ public CheckResult checkUserAndPassport(PassportCheckerParam paramObj)) { /*
(省略实现) */ } } 
```

C. 保持对象完整性（Preserve Whole Object）：
 ``` public class PassportChecker { public
CheckResult checkUserAndPassport(User user, Passport passport)) { /* (省略实现)
*/ } }
 ```
D. 原有实现已经足够可扩展和表意，无需优化，所以其它三个选项都属于过度优化。
选C，已分析确认，应该是保持对象完整性，将参数整合到参数对象中。
题目分析：
选项 A：使用了引入参数对象（Introduce Parameter Object），但是仅仅是用参数对象代替了全部输入，看似提升了可扩展性，但实际上没有实质性的优化。
选项 B：使用了引入参数对象（Introduce Parameter Object）和保持对象完整性（Preserve WholeObject），但是破坏了可读性，并增加了额外的代码组件，属于过度优化。 
选项 C：按照方法本身的职责，使用保持对象完整性（Preserve Whole Object）改进了可扩展性和可读性，恰到好处。 
选项 D：从字面上看，该方法的入参数据来自于两个对象，一个是 User，一个是 Passport，破坏了对象完整性，所以需要优化。



  
应该是ABC，switch重构，用查表或者工厂创建对象和消息的关系，以及职责链
52. 某产品软件中有一段消息处理程序，所处理的消息有很多种类型，这些消息有公共的消息头格式，处理代码根据收到的消息获取消息头中的类型调用具体的消息处理，目前代码使用 switch 语句判断不同消息类型，随着消息类型增多现在开发人员希望重构代码消除switch 语句降低代码复杂度并方便扩展消息类型，可以采用下面那些方法（）
A. 将 switch 语句改成 if else 判断，并按照每几个类型判断（比如 5 个）提取成子函数，这样既可以有效降低函数圈复杂度，又没有风险
B. 按照消息不同的类型和子类型设计消息类继承关系，将定义消息类继承树，处理消息时通过工厂创建对应具体消息对象处理
C. 使用表驱动方式重构，处理消息时根据消息类型查表找到对应处理方法执行
D. 使用职责链（chain of responsibility）模式，每个消息类型实现一个处理对应类型消息的处理器，处理消息时按照职责链执行处理
选BCD。消息继承、表驱动，职责链模式。


查阅资料确定csrf攻击用什么消减。
3.防止CSRF攻击(Cross-site request forgery, 跨站请求伪造)的主流方法是()
A.校验Http Referrer
B.校验Cookie中token
C.隐藏域token
D.校验cookie中的会话标识
 选C，分析：A可能会被绕过，B校验cookie中的token是做不到防护的，D更是做不到防护，故选C



（单选）消减CSRF的方法（）
A. 校验http referrer
B. 校验cookie的token
C. 校验cookie的会话ID
选A，【解析】优选措施是验证HTTP Referer；没有隐藏域token时，再选校验http referrer


（多选）CSRF的防御措施包含（）
A. 验证HTTP Referer字段
B.在请求地址中添加token并验证
C.在HTTP头中自定义属性并验证,也是Token机制
D.当用户关闭页面时要及时清除认证cookie
 选ABCD，已验证。

类图/uml图是什么，如何应用
类图是UML图的子类，常用于软件建模中，具体应用见软件建模习题。

uml各种类型的图表示什么关系
组合，总体和局部，公司和部门；聚合，总体和个体，群体和个人；
真题。正确说法：组件图和部署图可以结合在一起，描述哪些组件在哪些节点上运行。
错误说法有：
1）组件图(Component Diagram)描述系统中组件之间的物理关系。
2）概念建模用于定义需要软件管理和处理的数据/信息，以及这些信息之间的关系，一般用数据视图表示，如类图，活动图。
3）软件建模是通过不同视角，采用不同的模型图对一个软件系统进行的完整描述。


3：人-教师-教授是依赖关联关系，实线箭头，循环链表-队列是聚合关系，实线空菱形。

UML图，如果A是父类，B是其子类，B由1个C和N个D组成；画出UML图，泛化和组合关系绘制。
AB之间，泛化用实线三角，指向父类；
B和C、D，组合用实线实菱形，指向组合成的B。
指向统统是由小指向大范围。只有依赖和实现是虚线。

一个经理管N个雇员，不是关联关系，用1...N表示存在多重关系
管理的关系不是关联，不是关联，不是关联。
 一个经理对应多个员工，多个员工对应一个经理，以下UML图表示正确的是：不是关联，没有箭头、菱形、三角形

老师、学生、班级的UML图
学生和老师是关联关系，学生不能没有老师。
学生和班级是聚合关系，学生个体聚合成班级整体。
学生和心脏是组合关系，心脏是学生总体的局部，组合成学生。
关系由弱变强：依赖，关联，聚合，组合，泛化（继承），实现；泛化和实现是同级强度。图形绘制：箭头、菱形、三角
依赖和关联是虚线与实线之分，都是箭头
聚合与组合是空心和实心之分，都是菱形
泛化和实现是实线与虚线之分，都是三角，抽象和具体
【每日一题系列】选B
选B，FEMA，潜在故障
选BCD。组件化是分离接口的方式。
参考答案： B，哈希不能对口令加密。
A:  HMAC-SHA256算法
C: 通过HMAC等哈希算法对数据进行转换
D: HMAC-SHA256算法
参考答案： B，1024RSA，算法强度80
RSA 1024 ->80
RSA 2048 -> 112
RSA 3096 -> 128
RSA 7680 -> 192
RSA 15360 -> 256
参考答案： D

参考答案：BD，结构型模式，不修改代码则是适配器和桥接模式

参考答案：ABCD 



1.为了防止长期使用的口令被恶意猜测或破解，下面对口令提供的安全防护，正确的是：
A.系统应该具有限制人机账号口令最短使用期限和最长使用期限的能力
B.用户修改自己账户口令时，系统禁止新口令与前N个历史口令重复，此个数可配置
C.口令即将达到最长有效期限，应该提升用户修改口令
D.管理员修改自己的口令可以不用验证旧口令
选ABC


1.对于下面检查用户状态的函数，存在条件判断较复杂的问题，可以使用()重构方法提高可读性A.分解条件式，将每一个if条件表达式独立成一个函数（抽取以赋予意义，自注释）
B.以卫语句替代嵌套条件
C.引入解释性变量，将相关条件统一用一个临时变量，以此变量名来解释用途
D.将临时变量内联化，消除不合理的封装
选A

1.以下关于密钥管理安全说法中错误的是：
A.系统中同一密钥同时用于加密、认证授权，符合密钥敏捷性
B.密钥协商过程中避免中间人攻击，密钥协商过程应该有身份认证机制保护
C.应该避免根密钥硬编码，否则容易被质疑后门
D.IPSec/SSH协议都具有密钥协商机制
选A，同一秘钥多用途，错。

1.在登录认证过程中，下面哪项是最有效的口令防暴力破解消减措施
A.定期更新账号口令
B.增加认证验证码校验
C.口令长度至少10个字符
D.口令中强制要求增加特殊字符
选B

1.  （单选）下列做法归属于安全红线问题的是（）
A. 证书指纹算法使用SHA1
B. 产品部署中重要的资源变更没有记录日志
C. 日志内容包括用户名
D. 未登陆就能访问产品联机帮助
选B

78. (单选)某产品为了防范网络攻击，采取了如下防范措施，其中不属于韧性技术或者架构的措施是：
A. 按照关键模块和用户优先级进行优雅降级，确保攻击造成的影响最小化
B. 组网上通过合理配置实现管理面、控制面、用户面的三面隔离
C. 软件采用云化部署，为了安全运维，部署在相同的操作系统上
D. 监控可视化，可及时响应，及时维护业务
参考答案：C。C是常见的降低风险措施，没有啥主动的韧性技术。

特性需求分析包括客户场景分析、客户界面影响分析、特性间依赖和影响风险、DFX分析、功能影响分析等。其中，特性间依赖和影响分析主要分析各需求特性之间的依赖关系及其影响，要解决的是下述哪些问题（ ）选ACD。没有客户界面变更。

下列设计模式和安全相关的是（）
信任环、自由联盟身份联合模式。。。选ABC，没有抽象工厂。




选AB

需求分析一般会分别从特性和功能等维度进行分析，其中功能维度的需求分析活动包括概念建模、功能建模、系统行为建模等。下述选项针对功能维度的分析活动描述错误的是（）选A。原因是，概念建模只管抽象，不管实现，不需要定义信息间的关系。

3.在新增一种网元设备时往往需要先对相关的管理对象进行概念建模，对于这种需求分析阶段的概念建模，下列做法错误的是（）
A. 建模不必细化到完整的细节，比如类的属性具体类型可以不定义
B. 不要为系统的方方面面都建模，识别出对系统重要概念即可
C. 不仅要描述问题本身，还要关心如何实现
D. 不仅要描述对象，还要描述对象之间的关系
选C，题目分析：A 概念建模在描述对象的同时，还要描述其之间的关系；B 概念建模只需描述问题本身，不用关心如何实现；C 建模过程是识别关系概念，不需面面俱到；D 建模信息也是抽象的，在该阶段不需定义属性类型

56. 某设备软件有一消息处理函数，其代码段如下所示，考虑其循环体内判断逻辑复杂，拟对其进行重构：
```
void ProcOverheadMsg(const uint32 maxCount, const uint32 msgQueueId) {

    uint32 index = VOS_NULL_LONG;

    uint32 msgNum = GetMsgNum(cellQueueId);

    bool flag = false;

    bool timeFlag = false;

    for (uint32 count = 1; count < maxCount; count++) {

        timeFlag = false;

        flag = ((0 != (count % 6)) || ((VOS_NULL_LONG == msgNum) || (0 ==msgNum)));

        if (true == flag) {

            index = GetFirstNode(SPEED_CTRL_LIST_HEAD, 0);

            if(VOS_NULL_LONG != index) {

            timeFlag = true;

            ProTimerList(index);

            continue;

            }

        }

        flag =((0 == (count % 6)) || (false == timeFlag));

        if (true == flag) {

            flag = ((VOS_NULL_LONG!= msgNum) && (0 != msgNum));

            if (true == flag) { msgNum =ProcOverheadInfo(msgNum); }

        }

    }

    return;

}
```
经分析优化，重构后的函数为：
```
bool IsMsgNumValid(uint32 msgNum) {

    return ((msgNum != VOS_NULL_LONG) && (msgNum != 0));

}



void ProcOverheadMsg(const uint32 maxCount, const uint32 msgQueueId) {

    uint32 index = VOS_NULL_LONG;

    uint32 msgNum = GetMsgNum(cellQueueId);

    for (uint32 count = 1; count < maxCount; count++) {

        if(((count % 6) != 0) || !(IsMsgNumValid(msgNum))) {

            index = GetFirstNode(SPEED_CTRL_LIST_HEAD, 0);

            if (index != VOS_NULL_LONG) {

                ProTimerList(index);

                continue;

            }

        }

        if (IsMsgNumValid(msgNum)) { msgNum = ProcOverheadInfo(msgNum); }

    }

    return;

}
```
针对本次重构，请忽略不同语言的规范和语法差异，如下分析正确的是（ ）
A. 原函数通过状态标记 flag 更能清晰反应处理逻辑，且每个标记都是必须的
B. 重构后的函数功能将判断条件合并太多，导致功能与原函数不一致
C. 重构后的函数功能和原来函数功能是一致的
D. 函数循环体内“if (IsMsgNumValid (msgNum))”是多余的，可以直接删除，不影响功能
重点真题。考生选择答案：C，该结果：正确
题目分析：考试代码坏味道及重构方法。A 重构后功能保持不变，正确；B 不能删除该语句，否则逻辑与原函数不一致；C 功能未变；D 原函数通过条件提取方法可以看出“flag = ((0 ==(ulCount% 6)) || (false == timeFlag));”就冗余的，timeFlag 也完全没有价值。

45. 下面哪个 UML 适用于描述复杂算法的执行流程：
（A）活动图
（B）类图
（C）状态图
（D）用例图
选A。活动图来描述复杂算法流程。

5. 管理面所有用户的活动都要有日志记录，包括
A. 用户登录和退出
B. 锁定账号被自动解除
C. 用户所有非查询类业务操作以及结果
D. 用户的账号被锁定
选ABCD

37. 设计模式一般被分为三大类，其中行为模式用于描述程序在运行过程中复杂的流程控制，下列模式属于行为模式的有:
A. 观察者模式
B. 适配器模式
C. 桥接模式
D. 状态模式
选AD，BC是结构型模式

36. 安全验证码的设计要求是
A. 验证码必须是单一图片，有背景干扰
B. 验证码字符串要求随机生成，随机字符串必须是大小写字母数字
C. 验证码可在短期内多次使用
D. 验证码内容不能与客户端提交的任何信息相关联
选ABD。验证码不能短期多次重复使用。

34. 安全设计中，传输安全的设计原则，应该包括
A. 选择一种"合适"的安全传输协议
B. 算法原则只需考虑安全性原则，无需考虑性能
C. 考虑建立"逃生策略"，避免因证书加载失败、错误配置等异常导致的通讯中断
D. 无需考虑兼容使用"非安全协议"的老版本
选AC


30. 关于 STRIDE 威胁建模方法，以下理解正确的是：
A. STRIDE 要先绘制数据业务流图，在针对其中元素对应的威胁逐个分析，找到缺陷和削减措施；
B. 威胁库(威胁矩阵)建设，主要是分析威胁对业务的影响，已有的削减措施，攻击的可能性，并识别系统存在的缺陷；
C. STRIDE 方法能对某个威胁点进行深入全面的攻击路径分析，但是标准化程度低，适合安全专业组织/个人使用;
D. STRIDE 威胁分析通过资产被攻击的可能性及分析攻击的后果来分析安全风险。
选AB，选项中D项是TVRA方法的思路。【7.14更新，感谢评论区指正】
14. 对于变量的多个不同取值有不同的处理时，常用switch语句，不良的switch语句产生代码坏味道，对于switch的代码重构，以下说法正确的是：
A. switch语句一般至少有3以上的圈复杂度，为了降低圈复杂度，switch语句应该重构掉；
B. switch语句效率高，应该以效率优先的原则避免重构它；
C. 如果一个switch语句case数量较少，只是执行简单的行为，且评估未来增加case的可能性较小，就没有重构的必要了；
D. switch语句会造成圈复杂度高，为了满足平均圈复杂度小于5的要求，将每4个case语句封装成一个函数，将大switch语句拆分成多个小函数组合。
选C。

8. 系统中有一个全局资源类 X，只需要对外提供一个实例供使用者调用，应采用哪种设计
模式：
A. 使用外观模式，为 X 提供一个统一的访问接口
B. 将抽象工厂模式应用于 X
C. 将单实例模式应用于 X
D. 利用备忘录模式获取 X 的快照
选C，注意到只提供一个实例，就是单例模式

10. 有一个论坛网站，为了限制用户在论坛发布不当言论，需要对发布和评论内容进行过滤，这些过滤规则有很多种，一般需要多个规则同时过滤通过才可以正常发布，根据场景需要不改变单个规则的前提下，动态增加和调整规则的组合，应该使用下面哪种设计模式
A. 职责链模式
B. 观察者模式
C. 迭代器模式
D. 装饰模式
选A。过滤器有多重规则，是一种串联结构，只有所有规则通过才能发布，所以是职责链。

2. 关于隐私保护设计要求，以下做法正确的是
A. 某产品需要收集并存储、使用用户个人数据，可以不用提供隐私声明
B. 产品存储用户的信用卡 CVV 号，可以不用做匿名化处理
C. 某产品使用 HTTP 协议跨网络传输大批量的用户手机号码
D. 产品存储了用户登录时的验证码，可以不用做匿名化处理
选D，验证码没关系

11. 设计模式中关于结构型模式，以下说法正确的是
A. 结构型模式可以在不破坏类封装性的基础上，实现新的功能
B. 结构型模式主要用于创建一组对象
C. 结构型模式可以创建一组类的统一访问接口
D. 结构型模式可以在不破坏类封装性的基础上，使得类可以通不曾估计到的系统进行交互
选ACD

9. 在开发者测试设计和实现中，过度的使用断言检查每个细节，致使整个测试变得脆弱，重构手段有：
A. 识别无关细节并将其从测试中移除。
B. 将非强相关的测试部分进行拆分测试
C. 使用布尔运算符替换换位运算符
D. 使用良好的函数命名使其满足自解释的要求
选AB。

【存疑】7. 产品在对敏感数据进行加密时，以下哪些方式是被完全禁止使用的
A. 自行定义的通过变形/字符移动/异或等方式执行的数据转换算法
B. 通过编码的方式如(Base64数据编码)实现数据加密
C. 采用公司研发的私有加解密算法实现
D. 采用MD5算法实现数据加密
7.13更新：感谢李卓远指正。应该选：ABCD，公司内部研发的私有加密算法也是私有的，有风险；D是不安全算法，一般是禁止使用不安全密码算法的，虽然特殊场景可以例外使用，但是MD5不能用于敏感数据的加密算法。个人认为选：ACD，私有的、非标准的、用编码方式的被完全禁止  



65、下面需求分析的结果和描述示例，哪些不满足需求分析的质量要求？
A.对特殊的异常场景，不做分析。
B.特性的可交付性和服务代表要求不一致。
C.对性能的描述：整体系统的响应时间不小于2秒。
D.需求的来源和开发阶段的影响，通过IR/SR/AR进行了关联。
答案：ABC。C对性能的描述不对，是质量属性。

70、当应用工厂方法模式时要考虑下面哪些问题？
A.必须提供工厂方法的默认实现
B.参数化工厂方法
C.所有语言的特点
D.使用模板以避免创建子类
答案：BCD。工厂方法要避免实现，直观抽象关系。

74、关于重构，下列说法错误的是
A.重构尽量以微小的步伐修改程序，直接重构一个模块是非常冒险的行为，需要谨慎应对。
B.程序"如果没有坏(功能可用)，就不要去修复它"，是代码是否需要选择重构的必要条件。
C.重构方法非常复杂，重构也常常会引入问题，普通开发人员不要自行重构一段功能正常的代码。
D.重构一定要在开发过程中作为独立的阶段实施，并由独立的团队执行，便于版本进度和质量控制。
E.使用各种有利于解耦的设计模式常常会导致代码执行流程变长，对于性能要求高的代码，一定要少用设计模式。
答案：BCDE

68、某软件公司承接了为某工作流语言开发解释器的工作。该工作流语言由多种活动节点构成，具有类XML的语法结构。用户要求解释器工作时，对每个活动节点进行一系列的处理，包括执行活动、日志记录、调用外部应用程序等，并且要求处理过程具有可扩展能力。针对这种需求，公司采用一下哪个设计模式最为恰当？
A.适配器模式(ADAPTER)
B.迭代器模式(ITERATOR)
C.访问者模式(VISITOR)
D.观察者模式(OBSERVER)
答案：C。对每个活动节点进行访问，然后做相应处理，而不是消息传递类用观察者模式。