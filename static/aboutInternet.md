# 路由器设计基础
## 基础知识
路由器主要是为经过它的每个数据帧寻找一条最佳传输路径，并将该数据有效地传送到目的站点。
直接转发：直接到目的站点
间接转发：通过路由器的中转间接到达目的站点
### 路由器基本概念
1. 跳数：一个分组从源主机到目的主机所要经过的路由器的个数。跳数越小，路径越好，是选择最优路径的一种依据。
2. 带宽：一条链路的传输速率，一般表示为Mb/s
3. 延时：一个分组从其源主机到目的主机所要经历的时间，越短路径越好
4. 负载：单位时间内通过路由器或是线路的通信量
5. 可靠性：用分组传输过程中的误码率来衡量，误码率=传输中的误码/所传输的总码数*100%，是数据传输精确性的指标，越小可靠性越高
6. 开销：传输过程中的耗费，通常与所用链路带宽有关
### 评价依据
1. 算法必须正确、稳定、公平
2. 算法应尽量简单
3. 算法必须能适应网络拓扑和通信量的变化
4. 算法应最佳
### 路由表分类
- 静态路由表  
系统管理员事先设置好，固定目的地址路径列表，更新工作必须由管理员手动修改，一般只用在小型的结构不会经常改变的局域网系统中，或者故障查找的实验网络中。
- 动态路由表  
大型互联网络通常采用，自动运行**动态路由选择协议**，建立路由表。当网络结构变化时，协议会自动更新所有路由器中的路由表。不同规模的网络需要选择不同的动态路由选择协议。
### IP路由选择
两个原则
- 最长前缀匹配：无类域间路由法规定IP地址为网络前缀+主机号，那同一子网中网络前缀越多，主机号越少，寻找目的主机越容易
- 路由表条目尽可能少

比如核心路由器S0端口接入层的子网：156.26.0.0/24, 156.26.1.0/24, 156.26.2.0/24, 156.26.3.0/24合并,前22位相同，所以合并到了156.26.0.0/22；
核心路由器S1端口接入层的子网：156.26.56.0/24, 156.26.57.0/24, 156.26.58.0/24, 156.26.59.0/24合并，前22位相同，所以合并到了156.26.56.0/22  
路由器的路由表，下一步S0：156.26.63.0/28，S1：156.26.63.16/28  
下一步S0：156.26.63.240/30，S1：156.26.63.244/30，与输出接口直连  
有了路由表之后，如果RG接受到目的地址156.26.2.37的分组，路由器就需要寻找一条最佳的匹配路由。它将分组的目的地址与路由表中路由进行比较，网络前缀相同，并且网络前缀长度较长的作为最佳路由
## 自治系统与Internet的路由选择协议
## 内部网关协议IGP
## 最短路径优先协议OSPF
## 外部网关协议BGP